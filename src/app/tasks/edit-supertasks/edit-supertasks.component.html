<div fxLayout="row" fxLayoutAlign="start stretch" fxLayout.lt-md="column">
  <div fxFlex="70" fxFlex.lt-md="100">
    <grid-main>
      <app-page-title [title]="'Supertask Details'"></app-page-title>
        <form [formGroup]="viewForm">

          <div fxLayout="row wrap" fxLayoutAlign="start center" fxLayoutGap="10px">
            <input-text title="ID" formControlName="supertaskId" [disabled]="true"></input-text>
            <input-text title="Name" formControlName="supertaskName" [disabled]="true"></input-text>
          </div>

          <button-submit name="Delete" (click)="onDelete()" [disabled]="false" type="delete"></button-submit>
          <button-submit [name]="'Apply to Hashlist'" [routerLink]="['/tasks/',editedSTIndex,'applyhashlist']" (click)="onSubmit()"></button-submit>

        </form>
        <hr>
        <h5>Add Pretask</h5>
        <form [formGroup]="updateForm" (ngSubmit)="onSubmit()">

          <div fxLayout="column" fxLayoutAlign="start start">
          <input-multiselect
              [isLoading]="isLoading"
              [placeholder]="'Pretasks...'"
              [items]="selectPretasks"
              [label]="'Select or search Pretasks *'"
              [mergeIdAndName]="true"
              formControlName="pretasks"
              style="flex: 1;"
            ></input-multiselect>
          </div>

            <button-submit [name]="'Add'"></button-submit>
        </form>
  </grid-main>
</div>
<div fxFlex="30" fxFlex.lt-md="100">
  <grid-main>
    <h5> Estimate Time
      <mat-icon
      matTooltip="The benchmark number to enter below is the total amount of hashes per second per attack type of all of the agents combined that will run the supertask."
      aria-hidden="true"
    >
      info
    </mat-icon>
    </h5>
    <form [formGroup]="etForm" (ngSubmit)="keyspaceTimeCalc()">

      <div fxLayout="row wrap" fxLayoutAlign="start center" fxLayoutGap="10px">
        <input-number title="Benchmark for -a0 attacks" formControlName="benchmarka0"></input-number>
        <input-number title="Benchmark for -a3 attacks" formControlName="benchmarka3"></input-number>
      </div>

      <button-submit [name]="'Calculate Runtime'"></button-submit>

    <div *ngIf="etForm.get('benchmarka0').value !== 0 && etForm.get('benchmarka3').value !== 0">
      &nbsp;
      <tr>
        <th>
          Estimated total runtime of supertask:
        </th>
        <td class="runtimeOfSupertask">
        </td>
      </tr>
    </div>
   </form>
  </grid-main>
 </div>
</div>
<!--Table Pretasks part of the supertask -->
<app-table>
  <h4>Pretasks</h4>
  <table style="width: 100%" class="table table-striped table-hover table-sm" datatable [dtOptions]="dtOptions[0]" [dtTrigger]="dtTrigger">
    <thead class="thead-light">
      <tr>
          <th class="rounded-start">ID</th>
          <th>Name</th>
          <th>Attack Command</th>
          <th>Estimated Keyspace</th>
          <th>Attack runtime</th>
          <th class="rounded-end">Action</th>
      </tr>
      </thead>
      <tbody>
      <tr class="taskInSuper" *ngFor="let p of pretasks[0].matchObjectFiles">
        <td>
          <span [ngClass]="!p.color ? '' : 'pill-ebidem-tk'" [ngStyle]="{'background-color': p.color }">{{  p.pretaskId }}</span>
        </td>
        <td>
          <a [routerLink]="['/tasks/preconfigured-tasks/', p.pretaskId, 'edit' ]">
            {{ p.taskName | shortenString:35 }}
          </a>
        </td>
        <td>{{ p.attackCmd }}</td>
        <td>{{ p.pretaskFiles | keyspace:'lineCount':p.attackCmd:false }}</td>
        <td class="attackRuntime"></td>
        <td>
          <a class='btn-outline-gray-600 float-right' (click)="removeAssignedPretask(p.pretaskId)" data-toggle="tooltip" data-placement="top" title="Delete">
            <fa-icon aria-hidden="true">faTrash</fa-icon>
          </a>
        </td>
      </tr>
    </tbody>
  </table>
</app-table>
